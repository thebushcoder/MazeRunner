/*
 * invulnerabilityComponent.hpp
 *
 *  Created on: 20 Jul 2018
 *      Author: linbob
 */

#ifndef LIBADO_ENTITY_SYSTEMS_INVULNERABILITYSYSTEM_HPP_
#define LIBADO_ENTITY_SYSTEMS_INVULNERABILITYSYSTEM_HPP_

#include <SFML/Window.hpp>
#include <SFML/Graphics.hpp>
#include <anax/System.hpp>

#include "../components/componentsCollection.hpp"

struct InvulnerabilitySystem : anax::System<anax::Requires<InvulnerabilityComponent>>{

	InvulnerabilitySystem(){}

	void update(sf::Time& delta){
		for(auto e : getEntities()){
			InvulnerabilityComponent& iC = e.getComponent<InvulnerabilityComponent>();

			iC.elapsed += delta;

			if(iC.elapsed.asSeconds() >= iC.getMaxTime()){
				e.removeComponent<InvulnerabilityComponent>();
				e.activate();
			}
		}
	}
};

#endif /* LIBADO_ENTITY_SYSTEMS_INVULNERABILITYSYSTEM_HPP_ */
